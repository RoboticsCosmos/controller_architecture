{
	"@context":[
        "https://controller.org/metamodels/controllers/PID/pid_controller.jsonld",
		"https://controller.org/metamodels/controllers/PID/p_controller.jsonld",
        "https://controller.org/metamodels/controllers/PID/i_controller.jsonld",
        "https://controller.org/metamodels/controllers/PID/d_controller.jsonld",
        "https://controller.org/metamodels/controllers/PID/error.jsonld",
        "https://controller.org/metamodels/controllers/PID/gains.jsonld",
		{
			"@base": "https://controller.org/models/MyPIDContr/"
		}
	],
    "@id": "pid_controller",
	"@graph":[
        {
            "@id": "error",
            "@type": "ErrorSignal",
            "dtype": "xsd:float",
            "directions": ["x"],
            "unit": "m",
            "init": null
        },
        {
            "@id": "output",
            "@type": "OutputSignal",
            "dtype": "xsd:float",
            "directions": ["x"],
            "unit": "m/s",
            "init": ["0.0"]
        },
        {
            "@id": "set_point",
            "@type": "SetPointSignal",
            "dtype": "xsd:float",
            "directions": ["x"],
            "unit": "m",
            "init": ["10.0"]
        },
        {
            "@id": "integral_term",
            "@type": "IntegralTerm",
            "dtype": "xsd:float",
            "directions": ["x"],
            "unit": "m",
            "init": ["0.0"]
        },
        {
            "@id": "time_step",
            "@type": "TimeStep",
            "dtype": "xsd:float",
            "unit": "s",
            "init": "0.1"
        },
    
        {
            "@id": "pid_controller:p_gain_func1",
            "@type": ["pid_controller:Function","p_controller:PController"],
            "pid_controller:function": "p_controller",
            "pid_controller:parameters": ["error_value", "p_gain_value"],
            "p_controller:parameter1": "pid_controller:error",
            "p_controller:parameter2": "pid_controller:gains:p_gain_value"
        },
        {
            "@id": "pid_controller:p_gain_func2",
            "@type": ["pid_controller:Function","p_controller:PController", "p_controller:ConstantGain"],
            "pid_controller:function": "p_controller",
            "pid_controller:parameters": ["error_value", "p_gain_value"],
            "pid_controller:parameter1": "pid_controller:error",
            "pid_controller:parameter2": "pid_controller:gains:p_gain_value"
        },
        {
            "@id": "pid_controller:gains:p_gain_value",
            "@type": "pid_controller:PGainValue",
            "dtype": "xsd:float", // range, units
            "directions": ["x"],
            "init_val": [0.5]
        },    
        {
            "@id": "error_value",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "error_value", "pid_controller:error" ]
        },
        {
            "@id": "p_gain_value",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "p_gain_value", "pid_controller:gains:p_gain_value" ]
        },
    
        {
            "@id": "pid_controller:i_gain_func2",
            "@type": ["pid_controller:Function","i_controller:IController", "i_controller:ConstantGain"],
            "pid_controller:function": "i_controller",
            "pid_controller:parameters": ["error_value", "i_gain_value"],
            "i_controller:parameter1": "pid_controller:error",
            "i_controller:parameter2": "pid_controller:gains:i_gain_value"
        },
        {
            "@id": "i_gain_value",
            "@type":"pid_controller:Parameter",
            "dtype": "xsd:float",
            "directions": ["x"],
            "init_val": [0.5]        
        },
        {
            "@id": "i_gain_value",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "i_gain_value", "pid_controller:gains:i_gain_value" ]
        },
    
        {
            "@id": "pid_controller:d_gain_func2",
            "@type": ["pid_controller:Function","d_controller:DController", "d_controller:ConstantGain"],
            "pid_controller:function": "d_controller",
            "pid_controller:parameters": ["error_value", "d_gain_value"],
            "d_controller:parameter1": "pid_controller:error",
            "d_controller:parameter2": "pid_controller:gains:d_gain_value"
        },
        {
            "@id": "d_gain_value",
            "@type":"pid_controller:Parameter",
            "dtype": "xsd:float",
            "directions": ["x"],
            "init_val": [0.5]        
        },
        {
            "@id": "d_gain_value",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "d_gain_value", "pid_controller:gains:d_gain_value" ]
        },
        {
            "@id": "pid_controller:pid_controller_id",
            "@type": ["pid_controller:Function", "pid_controller:PIDController"],
            "pid_controller:function": "pid_controller",
            "pid_controller:parameters": ["p_gain_value", "i_gain_value", "d_gain_value", "set_point", "measured_value", "previous_value", "error", "integral_term", "time_step", "output"],
            "pid_controller:p_gain_value": "pid_controller:gains:p_gain_value",
            "pid_controller:i_gain_value": "pid_controller:gains:i_gain_value",
            "pid_controller:d_gain_value": "pid_controller:gains:d_gain_value",
            "pid_controller:set_point": "pid_controller:set_point",
            "pid_controller:error": "pid_controller:error",
            "pid_controller:integral_term": "pid_controller:integral_term",
            "pid_controller:time_step": "pid_controller:time_step",
            "pid_controller:output": "pid_controller:output"
        },
        {
            "@id": "set_point",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "set_point", "pid_controller:set_point" ]
        },
        {
            "@id": "integral_term",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "integral_term", "pid_controller:integral_term" ]
        },
        {
            "@id": "time_step",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "previous_value", "pid_controller:time_step" ]
        },
        {
            "@id": "output",
            "@type":"pid_controller:Parameter"
        },
        {
            "@type": "pid_controller:Argument",
            "pid_controller:connects": [ "output", "pid_controller:output" ]
        }				
	]
}
